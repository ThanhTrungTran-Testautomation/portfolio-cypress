apiVersion: batch/v1
kind: Job
metadata:
  name: cypress-run
  namespace: cypress-e2e
spec:
  template:
    spec:
      containers:
        - name: cypress
          image: myregistry/cypress-e2e:latest
          # Environment Variables für URLs
          env:
            - name: CYPRESS_baseUrl
              value: "https://staging.portfolio.com"   # Base URL für Tests
            - name: CYPRESS_loginPath
              value: "/login"
            - name: CYPRESS_dashboardPath
              value: "/dashboard"
          command: ["npx", "cypress", "run", "--browser", "chrome", "--headless"]
      restartPolicy: Never
  backoffLimit: 2